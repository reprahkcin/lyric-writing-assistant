(function(){"use strict";var t={5339:function(t,e,o){var s=o(5130),n=o(6768);function i(t,e,o,s,i,l){const a=(0,n.g2)("ActivityView");return(0,n.uX)(),(0,n.Wv)(a)}var l=o(4232);const a={key:0},c={class:"container"},r={class:"row my-3"},d={class:"col"},u={class:"card bg-dark ps-3 py-2 text-light shadow"},m={class:"fw-bold my-auto text-start"},h={class:"row mb-3"},g={class:"col"},p={class:"row mb-3"},b={class:"col"},S={key:1},v={key:1};function f(t,e,o,s,i,f){const k=(0,n.g2)("SongLibrary"),L=(0,n.g2)("SongComplete"),y=(0,n.g2)("PlainTextLayout"),w=(0,n.g2)("AuthComponent");return t.user?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",c,[(0,n.Lk)("div",r,[(0,n.Lk)("div",d,[(0,n.Lk)("div",u,[(0,n.Lk)("p",m," Welcome, "+(0,l.v_)(t.user.displayName),1)])])]),(0,n.Lk)("div",h,[(0,n.Lk)("div",g,[(0,n.bF)(k)])]),(0,n.Lk)("div",p,[(0,n.Lk)("div",b,[t.activeSong?((0,n.uX)(),(0,n.Wv)(L,{key:0,song:t.activeSong,plainTextActive:i.plainTextActive,onTogglePlainText:f.togglePlainText},null,8,["song","plainTextActive","onTogglePlainText"])):((0,n.uX)(),(0,n.CE)("p",S,"No song selected")),t.activeSong&&i.plainTextActive?((0,n.uX)(),(0,n.Wv)(y,{key:2,song:t.activeSong},null,8,["song"])):(0,n.Q3)("",!0)])])])])):((0,n.uX)(),(0,n.CE)("div",v,[(0,n.bF)(w)]))}const k={class:"card bg-light text-dark mb-5"},L={class:"card-body text-start"},y={class:"card-footer text-end"};function w(t,e,o,s,i,a){return(0,n.uX)(),(0,n.CE)("div",k,[e[1]||(e[1]=(0,n.Lk)("div",{class:"card-header bg-dark text-light"},[(0,n.Lk)("p",{class:"my-auto fw-bold text-start"},"Plain Text Layout")],-1)),(0,n.Lk)("div",L,[(0,n.Lk)("pre",null,(0,l.v_)(a.formattedSong),1)]),(0,n.Lk)("div",y,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm fw-bold",onClick:e[0]||(e[0]=(...t)=>a.copyToClipboard&&a.copyToClipboard(...t))}," Copy to Clipboard ")])])}o(8992),o(3949);var T=o(782),x={name:"PlainTextLayout",computed:{...(0,T.L8)({activeSong:"getActiveSong"}),formattedSong(){if(!this.activeSong)return"";let t=`Title: ${this.activeSong.title}\n`;return t+=`Mood: ${this.activeSong.mood}\n`,t+=`Theme: ${this.activeSong.theme}\n`,t+=`Hook: ${this.activeSong.hook}\n\n`,this.activeSong.sections.forEach((e=>{t+=`${e.type.toUpperCase()}`,e.chordProgression&&(t+=` - ${e.chordProgression}`),t+="\n\n",e.lines.forEach((e=>{t+=`${e}\n\n`})),t+="\n"})),t}},methods:{copyToClipboard(){const t=document.createElement("textarea");t.value=this.formattedSong,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}},C=o(1241);const E=(0,C.A)(x,[["render",w]]);var A=E;const _={class:"card bg-card text-dark-muted mb-3 shadow-sm"},O={class:"card-body"},I={class:"text-start"},P={class:"row"},N={class:"col"},F={class:"mb-3"},U={class:"col"},R={class:"mb-3"},X={class:"row"},$={class:"col"},V={class:"mb-3"},D={class:"col"},G={class:"mb-3"},H={class:"mb-3"};function J(t,e,o,i,a,c){const r=(0,n.g2)("SongSection");return(0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",O,[e[14]||(e[14]=(0,n.Lk)("h1",{class:"fs-4 my-auto fw-bold text-start"},"Song",-1)),e[15]||(e[15]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",I,[(0,n.Lk)("div",P,[(0,n.Lk)("div",N,[(0,n.Lk)("div",F,[e[9]||(e[9]=(0,n.Lk)("label",{for:"songTitle",class:"form-label fw-bold"},"Title",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control input-off-white",id:"songTitle","onUpdate:modelValue":e[0]||(e[0]=t=>a.localSong.title=t)},null,512),[[s.Jo,a.localSong.title]])])]),(0,n.Lk)("div",U,[(0,n.Lk)("div",R,[e[10]||(e[10]=(0,n.Lk)("label",{for:"songMood",class:"form-label fw-bold"},"Mood",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control input-off-white",id:"songMood","onUpdate:modelValue":e[1]||(e[1]=t=>a.localSong.mood=t),placeholder:"E.g. happy, sad, angry, etc."},null,512),[[s.Jo,a.localSong.mood]])])])]),(0,n.Lk)("div",X,[(0,n.Lk)("div",$,[(0,n.Lk)("div",V,[e[11]||(e[11]=(0,n.Lk)("label",{for:"songTheme",class:"form-label fw-bold"},"Theme",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control input-off-white",id:"songTheme","onUpdate:modelValue":e[2]||(e[2]=t=>a.localSong.theme=t),placeholder:"Briefly: what is the song about?"},null,512),[[s.Jo,a.localSong.theme]])])]),(0,n.Lk)("div",D,[(0,n.Lk)("div",G,[e[12]||(e[12]=(0,n.Lk)("label",{for:"songHook",class:"form-label fw-bold"},"Hook",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control input-off-white",id:"songHook","onUpdate:modelValue":e[3]||(e[3]=t=>a.localSong.hook=t),placeholder:"Catchy phrase or refrain"},null,512),[[s.Jo,a.localSong.hook]])])])]),(0,n.Lk)("div",H,[e[13]||(e[13]=(0,n.Lk)("label",{for:"songNarrative",class:"form-label fw-bold"},"Narrative Outline",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control input-off-white",id:"songNarrative",rows:"3","onUpdate:modelValue":e[4]||(e[4]=t=>a.localSong.narrativeOutline=t),placeholder:"This song is about..."},null,512),[[s.Jo,a.localSong.narrativeOutline]])])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.orderedSections,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:t.id},[(0,n.bF)(r,{section:t,isFirst:0===e,isLast:e===c.orderedSections.length-1,onUpdateLine:c.updateLine,onUpdateSection:c.updateSection,onRemoveSection:c.removeSection,onMoveSection:t=>c.moveSection(e,t)},null,8,["section","isFirst","isLast","onUpdateLine","onUpdateSection","onRemoveSection","onMoveSection"])])))),128)),(0,n.Lk)("button",{class:"btn btn-outline-custom btn-sm fw-bold mx-1",onClick:e[5]||(e[5]=t=>c.addSection("verse"))}," Add Verse "),(0,n.Lk)("button",{class:"btn btn-outline-custom btn-sm fw-bold mx-1",onClick:e[6]||(e[6]=t=>c.addSection("chorus"))}," Add Chorus "),(0,n.Lk)("button",{class:"btn btn-outline-custom btn-sm fw-bold mx-1",onClick:e[7]||(e[7]=t=>c.addSection("bridge"))}," Add Bridge "),(0,n.Lk)("button",{class:"btn btn-outline-custom btn-sm fw-bold mx-1",onClick:e[8]||(e[8]=(...t)=>c.activatePlainTextView&&c.activatePlainTextView(...t))},(0,l.v_)(o.plainTextActive?"Hide Plain Text":"Show Plain Text"),1)])])}o(4114),o(4520),o(2577);const j={class:"card mb-3 shadow-sm bg-card"},W={class:"card-body bg-section-card pt-1 rounded"},B={class:"row"},M={class:"col"},Q={class:"d-flex justify-content-between align-items-center text-dark-muted"},q={class:"ms-2 fs-5 fw-bold text-capitalize"},K={class:"btn-group gap-1"},z=["disabled"],Z=["disabled"],Y={class:"row"},tt={class:"col"},et=["onUpdate:modelValue","placeholder"],ot={class:"btn-group ms-2 gap-1"},st=["onClick","disabled"],nt=["onClick","disabled"],it=["disabled"],lt={class:"col-4"},at={class:"input-group mt-2"},ct={key:0,class:"mt-2 alert alert-info position-relative",style:{"max-height":"10em","overflow-y":"auto"}},rt={class:"list-unstyled text-start"};function dt(t,e,o,i,a,c){const r=(0,n.g2)("CountdownTimer");return(0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("div",W,[(0,n.Lk)("div",B,[(0,n.Lk)("div",M,[(0,n.Lk)("div",Q,[(0,n.Lk)("div",q,(0,l.v_)(o.section.type),1),(0,n.bF)(r,{class:"ms-auto me-2 text-dark-muted"}),(0,n.Lk)("div",null,[(0,n.Lk)("button",{class:"btn btn-outline-custom fw-bold btn-sm py-0 me-2",onClick:e[0]||(e[0]=(...t)=>c.confirmRemoveSelf&&c.confirmRemoveSelf(...t))},e[11]||(e[11]=[(0,n.Lk)("span",{class:"bi bi-trash-fill"},null,-1)])),(0,n.Lk)("div",K,[(0,n.Lk)("button",{class:"btn btn-outline-custom fw-bold py-0",onClick:e[1]||(e[1]=t=>c.moveSelf("up")),disabled:o.isFirst}," ↑ ",8,z),(0,n.Lk)("button",{class:"btn btn-outline-custom fw-bold py-0",onClick:e[2]||(e[2]=t=>c.moveSelf("down")),disabled:o.isLast}," ↓ ",8,Z)])])])])]),e[16]||(e[16]=(0,n.Lk)("hr",{class:"mt-1 mb-3"},null,-1)),(0,n.Lk)("div",Y,[(0,n.Lk)("div",tt,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control mb-2 input-off-white","onUpdate:modelValue":e[3]||(e[3]=t=>a.sectionNarrative=t),placeholder:"This section is about..."},null,512),[[s.Jo,a.sectionNarrative]]),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control mb-2 input-off-white","onUpdate:modelValue":e[4]||(e[4]=t=>a.chordProgression=t),placeholder:"Chord Progression"},null,512),[[s.Jo,a.chordProgression]]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.section.lines,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"mb-2 d-flex align-items-center"},[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control input-off-white","onUpdate:modelValue":t=>a.localLines[e]=t,placeholder:`Line ${e+1}`},null,8,et),[[s.Jo,a.localLines[e]]]),(0,n.Lk)("div",ot,[(0,n.Lk)("button",{class:"btn btn-outline-custom btn-sm h-100 my-0",onClick:t=>c.moveLine(e,"up"),disabled:0===e}," ↑ ",8,st),(0,n.Lk)("button",{class:"btn btn-outline-custom btn-sm h-100 my-0",onClick:t=>c.moveLine(e,"down"),disabled:e===a.localLines.length-1}," ↓ ",8,nt)])])))),128)),(0,n.Lk)("button",{class:"btn btn-outline-round mx-1",onClick:e[5]||(e[5]=(...t)=>c.removeLine&&c.removeLine(...t)),disabled:a.localLines.length<=1},e[12]||(e[12]=[(0,n.Lk)("span",{class:"fw-bold bi bi-dash-lg"},null,-1)]),8,it),(0,n.Lk)("button",{class:"btn btn-outline-round mx-1",onClick:e[6]||(e[6]=(...t)=>c.addLine&&c.addLine(...t))},e[13]||(e[13]=[(0,n.Lk)("span",{class:"bi bi-plus-lg"},null,-1)]))]),(0,n.Lk)("div",lt,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control input-off-white",rows:"10",placeholder:"Brainstorming area...","onUpdate:modelValue":e[7]||(e[7]=t=>a.brainstormingText=t)},null,512),[[s.Jo,a.brainstormingText]]),(0,n.Lk)("div",at,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control input-off-white",placeholder:"Rhymebrain.com query","onUpdate:modelValue":e[8]||(e[8]=t=>a.rhymeQuery=t)},null,512),[[s.Jo,a.rhymeQuery]]),(0,n.Lk)("button",{class:"btn btn-outline-custom",onClick:e[9]||(e[9]=(...t)=>c.fetchRhymes&&c.fetchRhymes(...t))},e[14]||(e[14]=[(0,n.Lk)("span",{class:"bi bi-search"},null,-1)]))]),a.rhymes.length?((0,n.uX)(),(0,n.CE)("div",ct,[(0,n.Lk)("button",{type:"button",class:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Close",onClick:e[10]||(e[10]=t=>a.rhymes=[])}),(0,n.Lk)("ul",rt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.rhymes,((t,e)=>((0,n.uX)(),(0,n.CE)("li",{key:e},(0,l.v_)(t.word),1)))),128))]),e[15]||(e[15]=(0,n.Lk)("p",null,[(0,n.eW)(" Rhyme results are provided by "),(0,n.Lk)("a",{href:"https://rhymebrain.com"},"RhymeBrain.com")],-1))])):(0,n.Q3)("",!0)])])])])}o(1454);const ut={class:"d-flex align-items-center justify-content-between"},mt={class:"flex-grow-1 text-center"},ht={key:0,class:"alert alert-danger my-1 fw-bold mx-3 py-0 text-nowrap"},gt={key:1,class:"fw-bold fs-4 me-3 my-0"},pt={class:"btn-group gap-1 w-100",role:"group"};function bt(t,e,o,s,i,a){return(0,n.uX)(),(0,n.CE)("div",ut,[(0,n.Lk)("div",mt,[i.timerEnded?((0,n.uX)(),(0,n.CE)("p",ht," Time's up! ")):((0,n.uX)(),(0,n.CE)("div",gt,(0,l.v_)(a.formattedTime),1))]),(0,n.Lk)("div",pt,[(0,n.Lk)("button",{class:"btn btn-outline-custom fw-bold py-0",onClick:e[0]||(e[0]=(...t)=>a.decrementTime&&a.decrementTime(...t))}," - "),(0,n.Lk)("button",{class:"btn btn-outline-custom fw-bold py-0",onClick:e[1]||(e[1]=(...t)=>a.incrementTime&&a.incrementTime(...t))}," + "),(0,n.Lk)("button",{class:"btn btn-outline-custom fw-bold py-0",onClick:e[2]||(e[2]=(...t)=>a.resetTime&&a.resetTime(...t))}," Reset ")])])}var St={name:"CountdownTimer",data(){return{minutes:0,seconds:0,timer:null,timerEnded:!1,audio:new Audio(o(4890))}},computed:{formattedTime(){const t=this.minutes,e=this.seconds<10?"0"+this.seconds:this.seconds;return`${t}:${e}`}},methods:{startTimer(){this.timer||(this.timer=setInterval((()=>{0===this.seconds?0===this.minutes?(clearInterval(this.timer),this.timer=null,this.timerEnded=!0,this.audio.play(),setTimeout((()=>{this.timerEnded=!1}),3e3)):(this.minutes--,this.seconds=59):this.seconds--}),1e3))},incrementTime(){this.minutes++,this.startTimer()},decrementTime(){this.minutes>0&&this.minutes--},resetTime(){this.minutes=0,this.seconds=0,clearInterval(this.timer),this.timer=null,this.timerEnded=!1}}};const vt=(0,C.A)(St,[["render",bt]]);var ft=vt,kt={emits:["update-section","remove-section","move-section"],props:{section:{type:Object,required:!0},isFirst:{type:Boolean,required:!0},isLast:{type:Boolean,required:!0}},components:{CountdownTimer:ft},data(){return{localLines:[...this.section.lines],sectionNarrative:this.section.sectionNarrative||"",brainstormingText:this.section.brainstormingText||"",chordProgression:this.section.chordProgression||"",rhymeQuery:"",rhymes:[]}},methods:{updateLine(t,e){this.$set(this.localLines,t,e)},moveLine(t,e){"up"===e&&t>0?[this.localLines[t-1],this.localLines[t]]=[this.localLines[t],this.localLines[t-1]]:"down"===e&&t<this.localLines.length-1&&([this.localLines[t+1],this.localLines[t]]=[this.localLines[t],this.localLines[t+1]])},confirmRemoveSelf(){confirm("Are you sure you want to remove this section?")&&this.removeSelf()},removeSelf(){this.$emit("remove-section",this.section.id)},typeColor(t){switch(t){case"verse":return"bg-verse";case"chorus":return"bg-chorus";case"bridge":return"bg-bridge";default:return"bg-secondary text-white"}},addLine(){this.localLines.push("")},removeLine(){this.localLines.length>1&&this.localLines.pop()},moveSelf(t){this.$emit("move-section",t),console.log("moveSelf emitted")},updateSection(){this.$store.dispatch("updateSection",{songId:this.section.songId,section:{...this.section,lines:this.localLines,sectionNarrative:this.sectionNarrative,brainstormingText:this.brainstormingText,chordProgression:this.chordProgression}})},async fetchRhymes(){if(""!==this.rhymeQuery.trim())try{const t=await fetch(`https://rhymebrain.com/talk?function=getRhymes&word=${this.rhymeQuery}`),e=await t.json(),o=e.filter((t=>1==t.syllables)).slice(0,20),s=e.filter((t=>2==t.syllables)).slice(0,10),n=e.filter((t=>t.syllables>=3)).slice(0,5);this.rhymes=[...o,...s,...n].map((t=>({word:t.word,syllables:t.syllables}))),console.log("Rhymes fetched:",this.rhymes)}catch(t){console.error("Error fetching rhymes:",t)}else this.rhymes=[]}},watch:{localLines:{handler(t){this.$emit("update-section",{...this.section,lines:t}),this.updateSection()},deep:!0},sectionNarrative(t){this.$emit("update-section",{...this.section,sectionNarrative:t}),this.updateSection()},brainstormingText(t){this.$emit("update-section",{...this.section,brainstormingText:t}),this.updateSection()},chordProgression(t){this.$emit("update-section",{...this.section,chordProgression:t}),this.updateSection()}}};const Lt=(0,C.A)(kt,[["render",dt]]);var yt=Lt,wt={name:"SongComplete",components:{SongSection:yt},props:{song:{type:Object,required:!0},plainTextActive:{type:Boolean,required:!0}},data(){return{localSong:{...this.song,sections:this.song.sections||[]}}},computed:{orderedSections(){return(this.localSong.sections||[]).slice().sort(((t,e)=>t.order[0]-e.order[0]))}},watch:{song:{handler(t){this.localSong={...t,sections:t.sections||[]},console.log("Updated localSong:",this.localSong)},immediate:!0},localSong:{handler(t){this.updateSong(t)},deep:!0}},methods:{...(0,T.i0)(["updateSong"]),updateLine({sectionId:t,index:e,newLine:o}){const s=this.localSong.sections.find((e=>e.id===t));s&&this.$set(s.lines,e,o)},addSection(t){const e={id:this.localSong.sections.length+1,order:[this.localSong.sections.length],type:t,lines:["","","",""],sectionNarrative:"",brainstormingText:"",chordProgression:"",theme:""};this.localSong.sections.push(e)},updateSection(t){const e=this.localSong.sections.findIndex((e=>e.id===t.id));-1!==e&&this.localSong.sections.splice(e,1,t)},removeSection(t){this.localSong.sections=this.localSong.sections.filter((e=>e.id!==t))},moveSection(t,e){if(console.log("moveSection called"),console.log(t,e),"up"===e&&t>0){const e=this.localSong.sections[t];this.localSong.sections[t]=this.localSong.sections[t-1],this.localSong.sections[t-1]=e}else if("down"===e&&t<this.localSong.sections.length-1){const e=this.localSong.sections[t];this.localSong.sections[t]=this.localSong.sections[t+1],this.localSong.sections[t+1]=e}this.localSong.sections.forEach(((t,e)=>{t.order=[e]})),this.updateSong(this.localSong)},activatePlainTextView(){this.$emit("toggle-plain-text")}},created(){console.log("Song prop:",this.song)}};const Tt=(0,C.A)(wt,[["render",J]]);var xt=Tt;const Ct={class:"row"},Et={class:"col"},At={class:"card bg-card text-dark-muted shadow-sm pb-3"},_t={class:"card-body"},Ot={class:"table input-off-white text-dark-muted"},It=["onClick"],Pt={class:"text-start",scope:"row"},Nt={class:"text-start"},Ft={class:"text-start"},Ut={class:"text-start"},Rt={class:"row"},Xt={class:"col"};function $t(t,e,o,s,i,a){return(0,n.uX)(),(0,n.CE)("div",Ct,[(0,n.Lk)("div",Et,[(0,n.Lk)("div",At,[(0,n.Lk)("div",_t,[e[3]||(e[3]=(0,n.Lk)("h1",{class:"fs-4 my-auto fw-bold text-start"},"Song Library",-1)),e[4]||(e[4]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("table",Ot,[e[2]||(e[2]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",{class:"text-start"},[(0,n.Lk)("th",{scope:"col",style:{width:"5%"}},"#"),(0,n.Lk)("th",{scope:"col",style:{width:"20%"}},"Title"),(0,n.Lk)("th",{scope:"col",style:{width:"45%"}},"Hook"),(0,n.Lk)("th",{scope:"col",style:{width:"20%"}},"Last Edit")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.getSongs,((t,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id,onClick:e=>a.selectSong(t),class:(0,l.C4)({"table-primary":t===i.selectedSong,"cursor-pointer":!0})},[(0,n.Lk)("th",Pt,(0,l.v_)(e+1),1),(0,n.Lk)("td",Nt,(0,l.v_)(t.title),1),(0,n.Lk)("td",Ft,(0,l.v_)(t.hook),1),(0,n.Lk)("td",Ut,(0,l.v_)(a.formatDate(t.lastEdit)),1)],10,It)))),128))])])]),(0,n.Lk)("div",Rt,[(0,n.Lk)("div",Xt,[(0,n.Lk)("button",{class:"btn btn-outline-custom me-2 btn-sm fw-bold",onClick:e[0]||(e[0]=(...t)=>a.confirmRemoveSong&&a.confirmRemoveSong(...t))}," Remove Song "),(0,n.Lk)("button",{class:"btn btn-outline-custom btn-sm fw-bold",onClick:e[1]||(e[1]=(...t)=>a.newSong&&a.newSong(...t))}," Add Song ")])])])])])}var Vt={name:"SongLibrary",data(){return{selectedSong:null}},computed:{...(0,T.L8)(["getSongs"])},methods:{...(0,T.i0)(["addSong","deleteSong","setActiveSong","updateSong","setSongs","resetStore"]),selectSong(t){this.selectedSong&&this.updateSong(this.selectedSong),this.selectedSong=t,this.setActiveSong(t)},newSong(){this.addSong()},confirmRemoveSong(){this.selectedSong?confirm(`Are you sure you want to remove the song "${this.selectedSong.title}"?`)&&this.removeSong():alert("Please select a song to remove.")},removeSong(){this.selectedSong&&(this.deleteSong(this.selectedSong.id),this.selectedSong=null,this.refreshAppState())},refreshAppState(){0===this.getSongs.length?this.resetStore():(this.setSongs(this.getSongs),this.setActiveSong(null))},formatDate(t){const e=new Date(t),o={month:"2-digit",day:"2-digit",year:"2-digit",hour:"numeric",minute:"numeric",hour12:!0};return e.toLocaleString("en-US",o).replace(",","")}},watch:{getSongs:{handler(){this.selectedSong&&(this.selectedSong=this.getSongs.find((t=>t.id===this.selectedSong.id)))},deep:!0}}};const Dt=(0,C.A)(Vt,[["render",$t],["__scopeId","data-v-b0a59dbe"]]);var Gt=Dt;const Ht={class:"container"},Jt={class:"row mt-5"},jt={class:"col"},Wt={class:"card border border-dark shadow"};function Bt(t,e,o,s,i,l){return(0,n.uX)(),(0,n.CE)("div",Ht,[(0,n.Lk)("div",Jt,[e[3]||(e[3]=(0,n.Lk)("div",{class:"col-3"},null,-1)),(0,n.Lk)("div",jt,[(0,n.Lk)("div",Wt,[e[2]||(e[2]=(0,n.Lk)("div",{class:"card-header bg-dark text-light"},[(0,n.Lk)("p",{class:"text-center my-auto fw-bold"},"Hello, Songwriter")],-1)),(0,n.Lk)("div",null,[(0,n.Lk)("button",{class:"btn btn-lg btn-primary fw-bold my-5",onClick:e[0]||(e[0]=(...t)=>l.signInWithGitHub&&l.signInWithGitHub(...t))},e[1]||(e[1]=[(0,n.eW)(" Sign In with GitHub "),(0,n.Lk)("span",{class:"ms-3 bi bi-github"},null,-1)]))])])]),e[4]||(e[4]=(0,n.Lk)("div",{class:"col-3"},null,-1))])])}var Mt=o(3869),Qt={name:"AuthComponent",methods:{async signInWithGitHub(){const t=(0,Mt.xI)(),e=new Mt.Dt;try{await(0,Mt.df)(t,e),console.log("Signed in with GitHub successfully")}catch(o){console.error("Error signing in with GitHub:",o)}}}};const qt=(0,C.A)(Qt,[["render",Bt]]);var Kt=qt,zt={name:"ActivityView",components:{SongLibrary:Gt,SongComplete:xt,PlainTextLayout:A,AuthComponent:Kt},computed:{...(0,T.L8)({activeSong:"getActiveSong",user:"user"})},watch:{activeSong:{handler(t){this.localSong={...t},this.saveStateToFirestore(),this.activeSongChanged=!0},immediate:!0},localSong:{handler(t){this.updateSong(t),this.activeSongChanged||this.debounceSaveState()},deep:!0}},data(){return{localSong:null,plainTextActive:!1,debounceTimeout:null,activeSongChanged:!1}},methods:{...(0,T.i0)(["updateSong","saveStateToFirestore"]),togglePlainText(){this.plainTextActive=!this.plainTextActive},debounceSaveState(){clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((()=>{this.saveStateToFirestore(),this.activeSongChanged=!1}),1e3)}}};const Zt=(0,C.A)(zt,[["render",f]]);var Yt=Zt,te={name:"App",components:{ActivityView:Yt}};const ee=(0,C.A)(te,[["render",i]]);var oe=ee,se=o(7617),ne=o(6400);const ie={apiKey:"AIzaSyDb8nZoo3LwrWHJB-uFCSlVLv3FsPIXMCI",authDomain:"lyric-writing-assistant.firebaseapp.com",projectId:"lyric-writing-assistant",storageBucket:"lyric-writing-assistant.firebasestorage.app",messagingSenderId:"550944326368",appId:"1:550944326368:web:3dd3fcd0009f72fef78685"},le=(0,ne.Wp)(ie),ae=(0,se.aU)(le),ce=(0,Mt.xI)(le),re=(0,T.y$)({state:{songs:[],activeSong:null,user:null},mutations:{SET_USER(t,e){t.user=e},SET_SONGS(t,e){t.songs=e},ADD_SONG(t,e){t.songs.push(e)},DELETE_SONG(t,e){const o=t.songs.findIndex((t=>t.id===e));-1!==o&&t.songs.splice(o,1)},UPDATE_SONG(t,e){const o=t.songs.findIndex((t=>t.id===e.id));-1!==o&&(t.songs[o]={...t.songs[o],...e,lastEdit:(new Date).toISOString()})},SET_ACTIVE_SONG(t,e){t.activeSong={...e}},UPDATE_SECTION(t,{songId:e,section:o}){const s=t.songs.find((t=>t.id===e));if(s){const t=s.sections.findIndex((t=>t.id===o.id));-1!==t&&s.sections.splice(t,1,o)}},RESET_STORE(t){t.songs=[],t.activeSong=null}},actions:{setUser({commit:t},e){t("SET_USER",e)},setSongs({commit:t},e){t("SET_SONGS",e)},addSong({commit:t}){const e={id:(new Date).getTime(),title:"Untitled",mood:"",hook:"",narrativeOutline:"",theme:"",sections:[],lastEdit:(new Date).toISOString()};t("ADD_SONG",e)},deleteSong({commit:t},e){t("DELETE_SONG",e)},updateSong({commit:t},e){t("UPDATE_SONG",e)},setActiveSong({commit:t},e){t("SET_ACTIVE_SONG",e)},updateSection({commit:t},e){t("UPDATE_SECTION",e)},resetStore({commit:t}){t("RESET_STORE")},async saveStateToFirestore({state:t}){if(!t.user)return;const e=(0,se.H9)(ae,"users",t.user.uid);try{await(0,se.BN)(e,{state:JSON.stringify(t)}),console.log("State saved to Firestore")}catch(o){console.error("Error saving state to Firestore:",o)}},async loadStateFromFirestore({commit:t,state:e}){if(!e.user)return;const o=(0,se.H9)(ae,"users",e.user.uid);try{const e=await(0,se.x7)(o);if(e.exists()){const o=e.data().state;if(o){const e=JSON.parse(o);e.songs=e.songs.map((t=>({...t,sections:Array.isArray(t.sections)?t.sections:[]}))),console.log("Loaded state from Firestore:",e),t("SET_SONGS",e.songs),t("SET_ACTIVE_SONG",e.activeSong),console.log("State loaded from Firestore")}else console.log("No state data found in Firestore")}else console.log("No state document found in Firestore")}catch(s){console.error("Error loading state from Firestore:",s)}}},getters:{getSongs(t){return t.songs},getActiveSong(t){return t.activeSong},user(t){return t.user}}});(0,Mt.hg)(ce,(t=>{t?(re.dispatch("setUser",t),re.dispatch("loadStateFromFirestore")):re.dispatch("setUser",null)}));var de=re,ue=o(1387);const me=[{path:de.getters.useLandingPage?"/activity":"/",name:"Activity",component:Yt},{path:"/auth",name:"AuthComponent",component:Kt}],he=(0,ue.aE)({linkExactActiveClass:"fw-bold",history:(0,ue.LA)("/lyric-writing-assistant/"),routes:me});var ge=he;async function pe(){await de.dispatch("loadStateFromFirestore"),(0,s.Ef)(oe).use(de).use(ge).mount("#app")}pe()},4890:function(t,e,o){t.exports=o.p+"media/alarm.e1848079.mp3"}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,o),i.exports}o.m=t,function(){var t=[];o.O=function(e,s,n,i){if(!s){var l=1/0;for(d=0;d<t.length;d++){s=t[d][0],n=t[d][1],i=t[d][2];for(var a=!0,c=0;c<s.length;c++)(!1&i||l>=i)&&Object.keys(o.O).every((function(t){return o.O[t](s[c])}))?s.splice(c--,1):(a=!1,i<l&&(l=i));if(a){t.splice(d--,1);var r=n();void 0!==r&&(e=r)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,n,i]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.p="/lyric-writing-assistant/"}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,l=s[0],a=s[1],c=s[2],r=0;if(l.some((function(e){return 0!==t[e]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(c)var d=c(o)}for(e&&e(s);r<l.length;r++)i=l[r],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(d)},s=self["webpackChunklyric_writing_assistant"]=self["webpackChunklyric_writing_assistant"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(5339)}));s=o.O(s)})();
//# sourceMappingURL=app.eceb4a63.js.map